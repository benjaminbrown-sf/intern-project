import React from 'react';
import {
  createMuiTheme,
  ThemeProvider,
  makeStyles,
} from '@material-ui/core/styles';
import Button from './elements/Button';
import theme from './theme';
import { useGet, CommitmentsQueryParams } from './hooks/axiosHooks';

import RecurringPaymentsTable from './components/RecurringPaymentsTable';

const MUITheme = createMuiTheme(theme);

// css styles for App are specified here. The className is generated by 'makeStyles' when
// the 'useAppStyles' hook is run
const useAppStyles = makeStyles(theme => {
  return {
    app: {
      textAlign: 'center',
    },
    appHeader: {
      display: 'flex',
      flexDirection: 'column',
      alignItems: 'center',
      justifyContent: 'center',
      fontSize: 'calc(10px + 2vmin)',
      color: 'white',
    },
    appLogo: {
      height: '100px',
      pointerEvents: 'none',
    },
    errorText: {
      color: theme.palette.error.main,
    },
    response: {
      fontFamily: 'monospace',
      whiteSpace: 'pre',
      textAlign: 'left',
    },
  };
});

const App = (): JSX.Element => {
  const classes = useAppStyles();

  const queryParams: CommitmentsQueryParams = {
    limit: 10,
    page: 0,
    sortField: 'firstName',
  };

  // This hook requests data from the mock server.
  // This component will re-render every time the state of this request changes:
  // when it sends the request, when it stops loading, when it has an error,
  // when it has a result

  return (
    <ThemeProvider theme={MUITheme}>
      <div className={classes.app}>
        <header className={classes.appHeader}>
          <img src="logo.png" className={classes.appLogo} alt="logo" />
        </header>
        <div>
          <RecurringPaymentsTable />
        </div>
      </div>
    </ThemeProvider>
  );
};

export default App;
